[gd_scene load_steps=47 format=3 uid="uid://bhb68kqkfragl"]

[ext_resource type="Script" uid="uid://dexb3awvsef8d" path="res://Game/Entities/TestEnemies/ActiveTestEnemy.cs" id="1_hc5v1"]
[ext_resource type="Script" uid="uid://cdvqcbs4rpfiv" path="res://Game/Entities/TestEnemies/Spawn.cs" id="3_b3ga6"]
[ext_resource type="PackedScene" uid="uid://vmtiw08cr30b" path="res://Components/DamageComps/hurtbox.tscn" id="3_m1e7j"]
[ext_resource type="Texture2D" uid="uid://d07fof5jb85ec" path="res://Assets/Entity/Enemy/Enemy_Intro.png" id="3_oxb72"]
[ext_resource type="Script" uid="uid://c6vb1yef0nhpa" path="res://Game/Entities/TestEnemies/Look.cs" id="3_q6s24"]
[ext_resource type="Material" uid="uid://cbu21hu7tbx1s" path="res://Game/Player/HitFlash.tres" id="4_6ce44"]
[ext_resource type="Script" uid="uid://bp03nkh0uoq1p" path="res://Game/Entities/TestEnemies/EnemyGun.cs" id="4_wxglr"]
[ext_resource type="Texture2D" uid="uid://bqe25i6ow8vul" path="res://Assets/Entity/Enemy/NewEnemyRobo.png" id="5_6ce44"]
[ext_resource type="Script" uid="uid://jqlj5orjwgch" path="res://Game/Entities/TestEnemies/AnimatedSpriteE.cs" id="5_bbp8y"]
[ext_resource type="PackedScene" uid="uid://na4yx06ro3jd" path="res://Game/Entities/StateMachine/state_machine.tscn" id="6_m1e7j"]
[ext_resource type="Script" uid="uid://c2orrjp6f8iyi" path="res://Game/Entities/StateMachine/States/Idle.cs" id="7_tko4x"]
[ext_resource type="Script" uid="uid://cbm2bcpra8ll1" path="res://Game/Entities/StateMachine/States/Follow.cs" id="8_i2p2e"]
[ext_resource type="PackedScene" uid="uid://cy8n2i1umi5jp" path="res://Game/Guns/Enemy/Pistol/EnemyPistol.tscn" id="9_bbp8y"]
[ext_resource type="Script" uid="uid://2sl1ow0g27ob" path="res://Game/Entities/StateMachine/States/Surround.cs" id="9_i2p2e"]
[ext_resource type="PackedScene" uid="uid://dyqbl4s13wnxg" path="res://Components/Etc/shadow.tscn" id="11_bbp8y"]
[ext_resource type="PackedScene" uid="uid://bp3lx4f7c5wd1" path="res://Components/Etc/hit_flash.tscn" id="11_oxb72"]

[sub_resource type="CircleShape2D" id="CircleShape2D_htgvw"]
radius = 6.0

[sub_resource type="AtlasTexture" id="AtlasTexture_tu046"]
atlas = ExtResource("3_oxb72")
region = Rect2(0, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_bpjlt"]
atlas = ExtResource("3_oxb72")
region = Rect2(64, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_dfc54"]
atlas = ExtResource("3_oxb72")
region = Rect2(128, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_ft2ws"]
atlas = ExtResource("3_oxb72")
region = Rect2(192, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_52160"]
atlas = ExtResource("3_oxb72")
region = Rect2(256, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_v57np"]
atlas = ExtResource("3_oxb72")
region = Rect2(320, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_bttnm"]
atlas = ExtResource("3_oxb72")
region = Rect2(384, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_h0pgt"]
atlas = ExtResource("3_oxb72")
region = Rect2(448, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_xj3bg"]
atlas = ExtResource("3_oxb72")
region = Rect2(512, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_04vud"]
atlas = ExtResource("3_oxb72")
region = Rect2(576, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_n18ka"]
atlas = ExtResource("3_oxb72")
region = Rect2(640, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_fpw3j"]
atlas = ExtResource("3_oxb72")
region = Rect2(704, 0, 64, 64)

[sub_resource type="SpriteFrames" id="SpriteFrames_deekk"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_tu046")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_bpjlt")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_dfc54")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ft2ws")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_52160")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_v57np")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_bttnm")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_h0pgt")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_xj3bg")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_04vud")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_n18ka")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_fpw3j")
}],
"loop": false,
"name": &"default",
"speed": 7.0
}]

[sub_resource type="AtlasTexture" id="AtlasTexture_bbp8y"]
atlas = ExtResource("5_6ce44")
region = Rect2(320, 64, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_oxb72"]
atlas = ExtResource("5_6ce44")
region = Rect2(128, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_6ce44"]
atlas = ExtResource("5_6ce44")
region = Rect2(64, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_eppew"]
atlas = ExtResource("5_6ce44")
region = Rect2(0, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_iuexv"]
atlas = ExtResource("5_6ce44")
region = Rect2(0, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_arfx8"]
atlas = ExtResource("5_6ce44")
region = Rect2(64, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_epb28"]
atlas = ExtResource("5_6ce44")
region = Rect2(128, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_cudr0"]
atlas = ExtResource("5_6ce44")
region = Rect2(192, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_koxjg"]
atlas = ExtResource("5_6ce44")
region = Rect2(0, 64, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_0bosg"]
atlas = ExtResource("5_6ce44")
region = Rect2(64, 64, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_1pgm1"]
atlas = ExtResource("5_6ce44")
region = Rect2(128, 64, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_gtypy"]
atlas = ExtResource("5_6ce44")
region = Rect2(192, 64, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_2naml"]
atlas = ExtResource("5_6ce44")
region = Rect2(256, 64, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_2dx1m"]
atlas = ExtResource("5_6ce44")
region = Rect2(320, 64, 64, 64)

[sub_resource type="SpriteFrames" id="SpriteFrames_b3ga6"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_bbp8y")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_oxb72")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_6ce44")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_eppew")
}],
"loop": false,
"name": &"Hit",
"speed": 11.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_iuexv")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_arfx8")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_epb28")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_cudr0")
}],
"loop": true,
"name": &"Idle",
"speed": 7.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_koxjg")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_0bosg")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_1pgm1")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_gtypy")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_2naml")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_2dx1m")
}],
"loop": true,
"name": &"Run",
"speed": 7.0
}]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_ccun0"]
radius = 8.0
height = 22.0

[node name="ActiveTestEnemy" type="CharacterBody2D"]
motion_mode = 1
platform_on_leave = 2
script = ExtResource("1_hc5v1")

[node name="CollisionShape" type="CollisionShape2D" parent="."]
shape = SubResource("CircleShape2D_htgvw")

[node name="Spawn" type="AnimatedSprite2D" parent="." node_paths=PackedStringArray("stateMachine", "hurtbox")]
sprite_frames = SubResource("SpriteFrames_deekk")
autoplay = "default"
frame = 11
frame_progress = 1.0
script = ExtResource("3_b3ga6")
stateMachine = NodePath("../StateMachine")
hurtbox = NodePath("../Hurtbox")

[node name="Hide" type="Node2D" parent="Spawn"]
visible = false

[node name="Shadow" parent="Spawn/Hide" instance=ExtResource("11_bbp8y")]
position = Vector2(0, -1)

[node name="AnimatedSpriteE" type="AnimatedSprite2D" parent="Spawn/Hide"]
material = ExtResource("4_6ce44")
position = Vector2(0, -10)
sprite_frames = SubResource("SpriteFrames_b3ga6")
animation = &"Hit"
script = ExtResource("5_bbp8y")

[node name="Look" type="Marker2D" parent="Spawn/Hide/AnimatedSpriteE"]
position = Vector2(0, 4)
script = ExtResource("3_q6s24")

[node name="EnemyGun" type="Node2D" parent="Spawn/Hide/AnimatedSpriteE/Look" node_paths=PackedStringArray("gun")]
position = Vector2(14, 0)
script = ExtResource("4_wxglr")
gun = NodePath("EnemyPistol")

[node name="RayCast" type="RayCast2D" parent="Spawn/Hide/AnimatedSpriteE/Look/EnemyGun"]
target_position = Vector2(100, 0)
collision_mask = 0

[node name="EnemyPistol" parent="Spawn/Hide/AnimatedSpriteE/Look/EnemyGun" instance=ExtResource("9_bbp8y")]

[node name="HitFlash" parent="Spawn/Hide/AnimatedSpriteE" instance=ExtResource("11_oxb72")]

[node name="Hurtbox" parent="." node_paths=PackedStringArray("hitFlash") instance=ExtResource("3_m1e7j")]
collision_layer = 4
isImmune = true
hitFlash = NodePath("../Spawn/Hide/AnimatedSpriteE/HitFlash")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Hurtbox"]
position = Vector2(0, -10)
shape = SubResource("CapsuleShape2D_ccun0")

[node name="StateMachine" parent="." node_paths=PackedStringArray("initialState") instance=ExtResource("6_m1e7j")]
initialState = NodePath("Idle")

[node name="Idle" type="Node" parent="StateMachine"]
script = ExtResource("7_tko4x")
NextState = "Surround"
PrevState = "Nothing"
metadata/_custom_type_script = "uid://c2orrjp6f8iyi"

[node name="Follow" type="Node" parent="StateMachine"]
script = ExtResource("8_i2p2e")
howClose = 100.0
speed = 50.0
nextRange = 50.0
NextState = "Nothing"
metadata/_custom_type_script = "uid://cbm2bcpra8ll1"

[node name="Surround" type="Node" parent="StateMachine"]
script = ExtResource("9_i2p2e")
moveSpeed = 30.0
circleRadius = 90.0
NextState = "Surround"
metadata/_custom_type_script = "uid://2sl1ow0g27ob"

[connection signal="animation_finished" from="Spawn" to="Spawn" method="_on_animation_finished"]
[connection signal="animation_finished" from="Spawn/Hide/AnimatedSpriteE" to="Spawn/Hide/AnimatedSpriteE" method="_on_animation_finished"]
